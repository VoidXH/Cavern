namespace Cavern.Virtualizer {
    public sealed partial class Distancer {
        /// <summary>
        /// All the angles that have their own impulse responses.
        /// </summary>
        static readonly float[] angles = { 0, 15, 30, 45, 60, 75, 90 };

        /// <summary>
        /// All the distances that have their own impulse responses for each angle in meters.
        /// </summary>
        static readonly float[] distances = { .1f, .25f, .5f, 1, 2 };

        /// <summary>
        /// Ear canal distortion impulse responses for given angles and distances. The first dimension is the angle,
        /// provided in <see cref="angles"/>, and the second dimension is the distance, provided in <see cref="distances"/>.
        /// The delays for each filter are found in <see cref="impulseDelays"/> and are applied when running the constructor first.
        /// </summary>
        static readonly float[][][] impulses = {
            new float[][] {
                new[] { .07280911f, .06462494f, .03621706f, .02388191f, 1, .3592792f, .01247505f },
                new[] { .1076947f, 1, .7025662f, .4730703f, .6746233f, .4077276f, .1590533f, .007440981f },
                new[] { 1, .9599667f, .7574043f, .563445f, .384205f, .205583f, .04723928f },
                new[] { .3099651f, 1, .8210505f, .6432168f, .4701469f, .314512f, .1522951f, .01557517f },
                new[] { 1, .995011f, .8049579f, .6124563f, .4361598f, .2638117f, .08705958f }
            },
            new float[][] {
                new[] { .1344281f, 1, .3292527f, .1896656f, .1199801f, .06613702f, .02265457f, .0001127756f },
                new[] { .01539751f, 1, .4081665f, .1379157f, .2765296f, .004177992f, .001445532f, 8.536115E-06f },
                new[] { .003450079f, 1, .3951304f, .3269113f, .0693358f, .1523703f, .07541669f, .0004151615f },
                new[] { 1, .6661633f, .3091478f, .2058491f, .1283903f, .0767751f, .0009242403f, 2.944942E-05f },
                new[] { .2499741f, 1, .3774478f, .3133463f, .1880997f, .1250631f, .0623516f, .0002920433f }
            },
            new float[][] {
                new[] { .06257993f, .09523416f, .5931237f, .1156644f, 1, .005021416f, .00050077f },
                new[] { .2355082f, 1, .5970099f, .3400322f, .203131f, .1150175f, .04886235f, .003074998f },
                new[] { 1, .9814389f, .7342445f, .5150265f, .3413402f, .1660449f, .02730976f },
                new[] { .6118575f, 1, .8684458f, .6847231f, .4924142f, .3063608f, .126405f, .005869763f },
                new[] { .1565535f, 1, .813062f, .6518386f, .4835832f, .3537659f, .1754839f, .0338771f }
            },
            new float[][] {
                new[] { .009142146f, 1, .2878403f, .08227473f, .003490633f, .001465153f, .0001208418f },
                new[] { .6204942f, 1, .6063665f, .3632298f, .2120882f, .1125071f, .03606193f, .0008710854f },
                new[] { .371588f, 1, .8135141f, .6742395f, .4747304f, .2724313f, .1150636f, .008209253f },
                new[] { .2152367f, .5590446f, 1, .9919566f, .8057337f, .5330636f, .2248113f, .01110894f },
                new[] { .5535611f, 1, .8372242f, .6353171f, .4756832f, .3067128f, .1420829f, .01671888f }
            },
            new float[][] {
                new[] { .7265214f, 1, .5024924f, .2297902f, .1199771f, .03201693f, .0005188733f },
                new[] { .1858565f, 1, .6881534f, .4469453f, .2566884f, .1449862f, .06030752f, .009879692f },
                new[] { .07542851f, .9329132f, 1, .7792008f, .5683066f, .3888762f, .2322347f, .08083527f, .009146959f },
                new[] { 1, .03538768f, .03892107f, .03323091f, .02448232f, .01700315f, .01041788f, .003600323f },
                new[] { .4779726f, 1, .9291803f, .6367276f, .5111281f, .3458712f, .1375917f, .01566455f }
            },
            new float[][] {
                new[] { .8114715f, 1, .4208195f, .2168841f, .04628683f, .001293332f },
                new[] { .6006778f, 1, .5405784f, .3098713f, .2071735f, .4052377f, .0399457f, .007321218f, 7.012694E-05f },
                new[] { .1129211f, 1, .1718559f, .1381525f, .1818777f, .06429848f, .03662953f, .01753195f, .00486109f, 4.179159E-05f },
                new[] { .7197832f, 1, .1481909f, .1208788f, .08932336f, .05708343f, .03211127f, .01443417f, .002165545f },
                new[] { .09626135f, 1, .9233426f, .8441116f, .5399653f, .4045798f, .2599762f, .1126483f, .02108685f }
            },
            new float[][] {
                new[] { .004066892f, 1, .9276068f, .689859f, .6293351f, .3191521f, .215393f, .4407475f, .06752289f,
                    .02275242f, .002159857f, 5.570841E-05f },
                new[] { .1883319f, 1, .3328354f, .2746456f, .7198558f, .2774538f, .2316711f, .2145967f, .09675916f,
                    .0682244f, .05688404f, .05102973f, .03165466f, .02654572f, .01556074f, .006934607f, .0006434356f },
                new[] { .03379108f, .4993314f, .2378534f, .3391335f, .1794211f, .1522885f, .3848652f, 1, .3525296f, .09647691f,
                    .4420892f, .1903519f, .06009025f, .04461118f, .1563454f, .1516566f, .03111456f, .02811026f, .02422654f, .01810599f,
                    .0170227f, .01517106f, .01244155f, .008510697f, .007499579f, .003624003f, .002449588f, .0003752929f },
                new[] { 4.703207E-05f, 0, 1, .169429f, .1465525f, .1309407f, .1184505f, .09640431f, .08442533f,
                    .07750326f, .06277364f, .0565761f, .04843304f, .03912108f, .02593273f, .02114692f, .009919425f,
                    .005272163f, .002747248f, .002523138f, .0007947971f, 8.330223E-05f, 4.133264E-05f },
                new[] { .09626135f, .9999999f, .9233426f, .8441116f, .5399653f, .4045798f, .2599762f, .1126483f, .02108685f }
            }
        };

        /// <summary>
        /// Trailing zeros to add before the <see cref="impulses"/>.
        /// </summary>
        static readonly short[][] impulseDelays = {
            new short[] { 8, 28, 63, 132, 271 },
            new short[] { 7, 28, 64, 132, 270 },
            new short[] { 7, 27, 62, 131, 269 },
            new short[] { 6, 26, 60, 130, 268 },
            new short[] { 5, 24, 58, 128, 267 },
            new short[] { 4, 23, 58, 129, 268 },
            new short[] { 0, 22, 61, 141, 268 }
        };
    }
}